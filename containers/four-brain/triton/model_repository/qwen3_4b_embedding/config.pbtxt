name: "qwen3_4b_embedding"
platform: "tensorrt_plan"
# Explicit-batch TensorRT engine for Qwen3-4B Embedding model with NVFP4 quantization
max_batch_size: 0
input: [
  { name: "input_ids", data_type: TYPE_INT64, dims: [ -1, -1 ] },
  { name: "attention_mask", data_type: TYPE_INT64, dims: [ -1, -1 ] }
]
output: [
  { name: "embedding", data_type: TYPE_FP32, dims: [ -1, 2000 ] }  # 2000 dimensions for Supabase compatibility
]

# GPU instance configuration for RTX 5070 Ti
instance_group [ { kind: KIND_GPU, count: 1 } ]

# Dynamic batching for better throughput
dynamic_batching {
  preferred_batch_size: [ 4, 8 ]
  max_queue_delay_microseconds: 100
}

# Model control is configured at the server level (--model-control-mode=explicit)
# Removed per Triton schema (model configs do not declare model_control)
